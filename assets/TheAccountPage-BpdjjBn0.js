import{T as I,a as S,F as B,u as N}from"./users-DdIZIjdB.js";import{a as O,T as U,u as V}from"./TheCatalogItem-BWF5YPfj.js";import{T as A}from"./TheButtonOrange-BURrrS7U.js";import{T as L}from"./ThePersonalityInfo-D4nnTCaE.js";import{_ as W,m as b,f,c as i,b as t,a as s,w as l,r as c,o as r,F as P,d as y,t as a,e as v}from"./index-Bpck9g6B.js";import{u as k}from"./categories-BAZdND2H.js";import"./PopUpBag-DMbuuTKN.js";import"./TheBagsItem-Cg0STnk2.js";const E={name:"TheAccount",components:{TheTabsWrapper:I,TheTab:S,TheCatalogItem:O,TheNavigation:U,VeeForm:B,TheButtonOrange:A,ThePersonalityInfo:L},data(){return{liked:[],currentPlants:[],selectedTab:0,orders:[],userData:null}},computed:{...b(V,["likedPlants"]),...b(k,["selectedPlant"])},watch:{"$i18n.locale"(e){this.updateOrders(e)}},methods:{...f(k,["getPlantById"]),...f(N,["removeActiveUser","updateUserData"]),setFilteredPlants(e){this.liked=e,this.updatePage(1)},updatePage(e){const _=(e-1)*9,d=_+9;this.currentPlants=this.liked.slice(_,d)},handlePersonalData(e){this.userData=e},saveChanges(){this.updateUserData()},goToNextTab(e){this.selectedTab=e},updateOrders(e){this.orders=this.$i18n.messages[e].orders||[]}},async mounted(){try{const e=this.likedPlants.map(d=>this.getPlantById(d)),_=await Promise.all(e);this.liked=_.filter(d=>d!==null),this.setFilteredPlants(this.liked)}catch(e){console.error("Error fetching liked plants:",e)}this.updateOrders(this.$i18n.locale)}},R={class:"account"},H={class:"account__container"},j={key:0,class:"order"},q={class:"order__header"},z={class:"order__item"},G={class:"order__img"},J=["src","alt","title"],K={class:"order__body"},M={class:"order__info"},Q={class:"order__footer"},X={key:1,class:"empty"},Y={class:"empty__title"},Z={class:"empty__desc"},x={key:0},ee={key:1,class:"empty"},te={class:"empty__title"},se={class:"empty__desc"},ae={class:"empty"},oe={class:"empty__title"},ne={class:"empty__desc"},le={class:"empty__btns"},ie={class:"empty__btn"};function re(e,_,d,ce,o,h){const m=c("TheButtonOrange"),p=c("RouterLink"),T=c("TheTab"),w=c("TheCatalogItem"),C=c("TheNavigation"),$=c("ThePersonalityInfo"),D=c("VeeForm"),F=c("TheTabsWrapper");return r(),i("div",R,[t("div",H,[s(F,{class:"account__tabs",display:"flex",direction:"column",font:"Lato",height:81,center:"center",margin:80,width:304,selectedTab:o.selectedTab,onUpdateTab:h.goToNextTab,border:"none"},{default:l(()=>[s(T,{class:"account__tab",title:e.$t("my-order"),selectedTitle:o.selectedTab===0},{default:l(()=>[o.orders.length?(r(),i("div",j,[(r(!0),i(P,null,y(o.orders,u=>(r(),i("div",{class:"order__wrapp",key:u.id},[t("div",q,[t("span",null,"№"+a(u.idOrder),1),t("span",null,a(u.data),1)]),(r(!0),i(P,null,y(u.plants,n=>(r(),i("div",{class:"order__main",key:n.id},[t("div",z,[t("div",G,[t("img",{src:n.img,alt:n.name,title:n.name},null,8,J)]),t("div",K,[t("div",M,[t("span",null,a(n.name),1),t("span",null,a(n.price*n.count)+" ₴",1)]),t("span",null,a(e.$t("count-products"))+": "+a(n.count)+" "+a(e.$t("pcs")),1)])])]))),128)),t("div",Q,[t("span",null,a(e.$t("total-pay"))+" :",1),t("span",null,a(u.plants.reduce((n,g)=>n+g.price*g.count,0))+" ₴",1)])]))),128))])):v("",!0),o.orders.length?v("",!0):(r(),i("div",X,[t("h2",Y,a(e.$t("your-purchase-empty")),1),t("p",Z,a(e.$t("no-porchase")),1),s(p,{to:{name:"TheCatalogPage"}},{default:l(()=>[s(m,{width:378,title:e.$t("return-catalog")},null,8,["title"])]),_:1})]))]),_:1},8,["title","selectedTitle"]),s(T,{class:"account__tab",title:e.$t("liked"),selectedTitle:o.selectedTab===1},{default:l(()=>[o.currentPlants.length?(r(),i("div",x,[s(w,{showPlants:o.currentPlants,class:"account__liked"},null,8,["showPlants"]),s(C,{"cards-per-page":9,onShowPage:h.updatePage,"total-plants":o.liked,class:"account__navigation"},null,8,["onShowPage","total-plants"])])):(r(),i("div",ee,[t("h2",te,a(e.$t("no-liked-plants")),1),t("p",se,a(e.$t("no-likes-plants-p")),1),s(p,{to:{name:"TheCatalogPage"}},{default:l(()=>[s(m,{width:378,title:e.$t("return-catalog")},null,8,["title"])]),_:1})]))]),_:1},8,["title","selectedTitle"]),s(T,{class:"account__tab",title:e.$t("personal-data"),selectedTitle:o.selectedTab===2},{default:l(()=>[s(D,{class:"account__form form",onSubmit:h.saveChanges},{default:l(()=>[s($,{onPersonalData:h.handlePersonalData},null,8,["onPersonalData"]),s(m,{title:e.$t("save-changes"),width:310,class:"form__btn"},null,8,["title"])]),_:1},8,["onSubmit"])]),_:1},8,["title","selectedTitle"]),s(T,{class:"account__tab",title:e.$t("go-out"),selectedTitle:o.selectedTab===3},{default:l(()=>[t("div",ae,[t("h2",oe,a(e.$t("sure-exit")),1),t("p",ne,a(e.$t("unsaved")),1),t("div",le,[s(p,{to:{name:"HomePage"},onClick:e.removeActiveUser},{default:l(()=>[t("button",ie,a(e.$t("go-out")),1)]),_:1},8,["onClick"]),s(p,{to:{name:"TheCatalogPage"}},{default:l(()=>[s(m,{width:284,title:e.$t("stay")},null,8,["title"])]),_:1})])])]),_:1},8,["title","selectedTitle"])]),_:1},8,["selectedTab","onUpdateTab"])])])}const be=W(E,[["render",re],["__scopeId","data-v-b427ac69"]]);export{be as default};
